<div class="p-4 flex flex-col h-full">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold text-gray-800">Messages</h2>
    <button class="text-[#1A4D2E] hover:text-[#4F6F52]">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </button>
  </div>

  <div class="relative mb-4">
    <input 
      type="text" 
      placeholder="Search messages..."
      class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-[#1A4D2E] focus:border-transparent bg-gray-100"
    >
    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
  </div>

  <div class="flex-grow overflow-y-auto -mx-4">
    @for (convo of conversations(); track convo.id) {
      <div class="flex items-center p-4 border-b border-gray-200 hover:bg-gray-100 cursor-pointer">
        <div class="relative">
          <img [src]="convo.participantAvatar" alt="{{ convo.participantName }}" class="w-12 h-12 rounded-full">
           @if (convo.isGroup) {
            <div class="absolute -bottom-1 -right-1 bg-white p-0.5 rounded-full">
              <div class="w-5 h-5 bg-purple-200 text-purple-700 rounded-full flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
                </svg>
              </div>
            </div>
          }
        </div>
        <div class="flex-grow ml-3">
          <p class="font-bold text-gray-800">{{ convo.participantName }}</p>
          <p class="text-sm text-gray-500 truncate">{{ convo.lastMessage }}</p>
        </div>
        <div class="flex flex-col items-end text-xs text-gray-400">
          <p class="mb-1">{{ convo.timestamp }}</p>
          @if (convo.unreadCount > 0) {
            <span class="w-5 h-5 bg-[#1A4D2E] text-white text-xs font-bold rounded-full flex items-center justify-center">
              {{ convo.unreadCount }}
            </span>
          }
        </div>
      </div>
    }
  </div>
</div>
